version: '3'

services:
  ldap:
    image: osixia/openldap:latest
    ports:
      - 389:389
      - 636:636
  app:
    image: httpd:latest
    volumes:
      - ./config/app/usr/local/apache2/htdocs:/usr/local/apache2/htdocs
    ports:
      - 7000:80
    depends_on:
      - ldap
  httpd:
    image: httpd:latest
    volumes:
      - ./config/httpd/usr/local/apache2/conf/httpd.conf:/usr/local/apache2/conf/httpd.conf
      - ./config/httpd/usr/local/apache2/conf/extra/proxy-html.conf:/usr/local/apache2/conf/extra/proxy-html.conf
    ports:
      - 7001:7001
    links:
      - app:app
    depends_on:
      - ldap
      - app